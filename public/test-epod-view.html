<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EPOD View Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
</head>
<body>
    <div class="container mt-5">
        <h1>EPOD View Test</h1>
        <p>This page tests the new E-POD view implementation that displays signed deliveries with their signatures.</p>
        
        <button class="btn btn-primary" onclick="addTestEPodRecord()">Add Test E-POD Record</button>
        <button class="btn btn-secondary" onclick="viewEPodRecords()">View E-POD Records</button>
        <button class="btn btn-danger" onclick="clearEPodRecords()">Clear E-POD Records</button>
        
        <div class="mt-4">
            <h3>Current E-POD Records:</h3>
            <pre id="epodRecords"></pre>
        </div>
    </div>

    <script>
        // Test adding an E-POD record
        function addTestEPodRecord() {
            // Create a simple signature data URL (1x1 transparent PNG)
            const signatureData = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==';
            
            const testRecord = {
                drNumber: 'DR-20231025-001',
                customerName: 'John Smith',
                customerContact: '+63 917 123 4567',
                truckPlate: 'ABC-1234',
                origin: 'MCI Alabang Warehouse',
                destination: 'Makati City',
                signature: signatureData,
                status: 'Completed',
                signedAt: new Date().toISOString(),
                timestamp: new Date().toISOString()
            };
            
            let ePodRecords = JSON.parse(localStorage.getItem('ePodRecords') || '[]');
            ePodRecords.push(testRecord);
            localStorage.setItem('ePodRecords', JSON.stringify(ePodRecords));
            
            updateEPodRecordsDisplay();
            alert('Test E-POD record added!');
        }
        
        // Test clearing E-POD records
        function clearEPodRecords() {
            localStorage.removeItem('ePodRecords');
            updateEPodRecordsDisplay();
            alert('E-POD records cleared!');
        }
        
        // View E-POD records
        function viewEPodRecords() {
            alert('You can view the E-POD records in the main application by navigating to the E-POD section.');
        }
        
        // Update display of E-POD records
        function updateEPodRecordsDisplay() {
            const ePodRecords = JSON.parse(localStorage.getItem('ePodRecords') || '[]');
            document.getElementById('epodRecords').textContent = JSON.stringify(ePodRecords, null, 2);
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateEPodRecordsDisplay();
        });
    </script>
</body>
</html>