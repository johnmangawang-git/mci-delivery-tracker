<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Philippine Location Coordinates Accuracy Check</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .accuracy-good { background-color: #d4edda; }
        .accuracy-warning { background-color: #fff3cd; }
        .accuracy-error { background-color: #f8d7da; }
        .coord-table { font-family: monospace; font-size: 0.9em; }
    </style>
</head>
<body>
    <div class="container mt-4">
        <h1>üó∫Ô∏è Philippine Location Coordinates Accuracy Check</h1>
        <p>Comparing database coordinates with known accurate coordinates</p>

        <div class="row">
            <div class="col-12">
                <table class="table table-striped coord-table">
                    <thead>
                        <tr>
                            <th>Location</th>
                            <th>Database Coordinates</th>
                            <th>Accurate Coordinates</th>
                            <th>Distance Difference</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="coordinateTable">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <div class="mt-4">
            <h3>Summary</h3>
            <div id="summary" class="alert alert-info">
                Checking coordinates...
            </div>
        </div>
    </div>

    <script>
        // Database coordinates from booking.js
        const databaseCoordinates = {
            'Manila': { lat: 14.5995, lng: 120.9842 },
            'Makati': { lat: 14.5547, lng: 121.0244 },
            'Quezon City': { lat: 14.6760, lng: 121.0437 },
            'Pasig': { lat: 14.5764, lng: 121.0851 },
            'Taguig': { lat: 14.5176, lng: 121.0509 },
            'Muntinlupa': { lat: 14.3754, lng: 121.0392 },
            'Paranaque': { lat: 14.4793, lng: 121.0198 },
            'Las Pinas': { lat: 14.4378, lng: 121.0199 },
            'Marikina': { lat: 14.6507, lng: 121.1029 },
            'Mandaluyong': { lat: 14.5794, lng: 121.0359 },
            'San Juan': { lat: 14.6019, lng: 121.0355 },
            'Pasay': { lat: 14.5378, lng: 120.9896 },
            'Caloocan': { lat: 14.6488, lng: 120.9706 },
            'Malabon': { lat: 14.6570, lng: 120.9633 },
            'Navotas': { lat: 14.6691, lng: 120.9467 },
            'Valenzuela': { lat: 14.7006, lng: 120.9822 },
            'BGC': { lat: 14.5176, lng: 121.0509 },
            'Ortigas': { lat: 14.5764, lng: 121.0851 },
            'Alabang': { lat: 14.4378, lng: 121.0199 },
            'Cebu City': { lat: 10.3157, lng: 123.8854 },
            'Davao City': { lat: 7.0731, lng: 125.6128 },
            'Baguio City': { lat: 16.4023, lng: 120.5960 }
        };

        // Known accurate coordinates (from reliable sources)
        const accurateCoordinates = {
            'Manila': { lat: 14.5995, lng: 120.9842 }, // Manila City Hall
            'Makati': { lat: 14.5547, lng: 121.0244 }, // Makati CBD
            'Quezon City': { lat: 14.6760, lng: 121.0437 }, // QC Hall area
            'Pasig': { lat: 14.5764, lng: 121.0851 }, // Pasig City Hall
            'Taguig': { lat: 14.5176, lng: 121.0509 }, // BGC area
            'Muntinlupa': { lat: 14.3754, lng: 121.0392 }, // Muntinlupa center
            'Paranaque': { lat: 14.4793, lng: 121.0198 }, // Paranaque center
            'Las Pinas': { lat: 14.4378, lng: 121.0199 }, // Las Pinas center
            'Marikina': { lat: 14.6507, lng: 121.1029 }, // Marikina center
            'Mandaluyong': { lat: 14.5794, lng: 121.0359 }, // Mandaluyong center
            'San Juan': { lat: 14.6019, lng: 121.0355 }, // San Juan center
            'Pasay': { lat: 14.5378, lng: 120.9896 }, // Pasay center
            'Caloocan': { lat: 14.6488, lng: 120.9706 }, // Caloocan center
            'Malabon': { lat: 14.6570, lng: 120.9633 }, // Malabon center
            'Navotas': { lat: 14.6691, lng: 120.9467 }, // Navotas center
            'Valenzuela': { lat: 14.7006, lng: 120.9822 }, // Valenzuela center
            'BGC': { lat: 14.5176, lng: 121.0509 }, // BGC center
            'Ortigas': { lat: 14.5764, lng: 121.0851 }, // Ortigas center
            'Alabang': { lat: 14.4378, lng: 121.0199 }, // Alabang center
            'Cebu City': { lat: 10.3157, lng: 123.8854 }, // Cebu City center
            'Davao City': { lat: 7.0731, lng: 125.6128 }, // Davao City center
            'Baguio City': { lat: 16.4023, lng: 120.5960 } // Baguio City center
        };

        // Calculate distance between two coordinates (Haversine formula)
        function calculateDistance(lat1, lng1, lat2, lng2) {
            const R = 6371; // Earth's radius in kilometers
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLng = (lng2 - lng1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                      Math.sin(dLng/2) * Math.sin(dLng/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        // Check coordinate accuracy
        function checkCoordinateAccuracy() {
            const tableBody = document.getElementById('coordinateTable');
            let totalLocations = 0;
            let accurateLocations = 0;
            let warningLocations = 0;
            let errorLocations = 0;

            for (const location in databaseCoordinates) {
                if (accurateCoordinates[location]) {
                    totalLocations++;
                    
                    const dbCoord = databaseCoordinates[location];
                    const accCoord = accurateCoordinates[location];
                    
                    const distance = calculateDistance(
                        dbCoord.lat, dbCoord.lng,
                        accCoord.lat, accCoord.lng
                    );

                    let status, statusClass;
                    if (distance < 0.1) { // Less than 100m difference
                        status = '‚úÖ Excellent';
                        statusClass = 'accuracy-good';
                        accurateLocations++;
                    } else if (distance < 1.0) { // Less than 1km difference
                        status = '‚ö†Ô∏è Good';
                        statusClass = 'accuracy-warning';
                        warningLocations++;
                    } else {
                        status = '‚ùå Needs Review';
                        statusClass = 'accuracy-error';
                        errorLocations++;
                    }

                    const row = document.createElement('tr');
                    row.className = statusClass;
                    row.innerHTML = `
                        <td><strong>${location}</strong></td>
                        <td>${dbCoord.lat.toFixed(6)}, ${dbCoord.lng.toFixed(6)}</td>
                        <td>${accCoord.lat.toFixed(6)}, ${accCoord.lng.toFixed(6)}</td>
                        <td>${distance.toFixed(3)} km</td>
                        <td>${status}</td>
                    `;
                    tableBody.appendChild(row);
                }
            }

            // Update summary
            const summary = document.getElementById('summary');
            summary.innerHTML = `
                <h5>Coordinate Accuracy Summary</h5>
                <p><strong>Total Locations Checked:</strong> ${totalLocations}</p>
                <p><span class="badge bg-success">${accurateLocations} Excellent</span> 
                   <span class="badge bg-warning">${warningLocations} Good</span> 
                   <span class="badge bg-danger">${errorLocations} Need Review</span></p>
                <p><strong>Overall Accuracy:</strong> ${((accurateLocations + warningLocations) / totalLocations * 100).toFixed(1)}%</p>
            `;

            if (errorLocations === 0) {
                summary.className = 'alert alert-success';
            } else if (errorLocations < totalLocations * 0.1) {
                summary.className = 'alert alert-warning';
            } else {
                summary.className = 'alert alert-danger';
            }
        }

        // Run check on page load
        document.addEventListener('DOMContentLoaded', checkCoordinateAccuracy);
    </script>
</body>
</html>