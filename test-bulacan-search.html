<!DOCTYPE html>
<html>
<head>
    <title>Test Bulacan Search Fix</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f8f9fa; }
        .test-section { background: white; border: 1px solid #ddd; margin: 10px 0; padding: 20px; border-radius: 8px; }
        .success { background: #d4edda; border-color: #c3e6cb; }
        .error { background: #f8d7da; border-color: #f5c6cb; }
        .log { background: #f5f5f5; padding: 15px; margin: 10px 0; font-family: monospace; white-space: pre-wrap; max-height: 400px; overflow-y: auto; border-radius: 4px; }
        .result { background: #e9ecef; padding: 10px; margin: 5px 0; border-radius: 4px; border-left: 4px solid #007bff; }
        button { padding: 10px 15px; margin: 5px; border: none; border-radius: 4px; cursor: pointer; }
        .btn-primary { background: #007bff; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-warning { background: #ffc107; color: black; }
        input { padding: 8px; margin: 5px; width: 300px; border: 1px solid #ddd; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>üó∫Ô∏è Bulacan Search Fix Test</h1>
    
    <div class="test-section">
        <h2>Search Test</h2>
        <input type="text" id="searchInput" placeholder="Try: Bulacan, Malolos, San Jose del Monte" value="Bulacan, Central Luzon, Philippines">
        <button onclick="testSearch()" class="btn-primary">Test Search</button>
        <button onclick="testMultipleSearches()" class="btn-success">Test Multiple Locations</button>
        <button onclick="clearResults()" class="btn-warning">Clear Results</button>
    </div>
    
    <div class="test-section">
        <h2>Search Results</h2>
        <div id="searchResults"></div>
    </div>
    
    <div class="test-section">
        <h2>Debug Log</h2>
        <div id="debugLog" class="log"></div>
    </div>
    
    <script>
        let debugLog = document.getElementById('debugLog');
        let searchResults = document.getElementById('searchResults');
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}\\n`;
            debugLog.textContent += logEntry;
            console.log(message);
            debugLog.scrollTop = debugLog.scrollHeight;
        }
        
        function clearResults() {
            debugLog.textContent = '';
            searchResults.innerHTML = '';
        }
        
        // Enhanced mock search function with Bulacan locations
        function mockAddressSearch(query) {
            const mockLocations = [
                // Metro Manila
                { lat: "14.5995", lng: "120.9842", display_name: "Manila, Metro Manila, Philippines", type: "city", class: "place" },
                { lat: "14.5547", lng: "121.0244", display_name: "Makati City, Metro Manila, Philippines", type: "city", class: "place" },
                { lat: "14.5176", lng: "121.0509", display_name: "BGC, Taguig City, Metro Manila, Philippines", type: "district", class: "place" },
                { lat: "14.6760", lng: "121.0437", display_name: "Quezon City, Metro Manila, Philippines", type: "city", class: "place" },
                { lat: "14.4378", lng: "121.0199", display_name: "Alabang, Muntinlupa City, Metro Manila, Philippines", type: "district", class: "place" },
                { lat: "14.5764", lng: "121.0851", display_name: "Ortigas Center, Pasig City, Metro Manila, Philippines", type: "district", class: "place" },
                { lat: "14.6507", lng: "121.1029", display_name: "Marikina City, Metro Manila, Philippines", type: "city", class: "place" },
                { lat: "14.5243", lng: "120.9947", display_name: "Ermita, Manila, Metro Manila, Philippines", type: "district", class: "place" },
                
                // Central Luzon (Region III) - BULACAN LOCATIONS ADDED
                { lat: "14.7942", lng: "120.9402", display_name: "Malolos, Bulacan, Central Luzon, Philippines", type: "city", class: "place" },
                { lat: "14.8564", lng: "120.8154", display_name: "Bulacan, Central Luzon, Philippines", type: "province", class: "place" },
                { lat: "14.6488", lng: "120.9706", display_name: "Meycauayan, Bulacan, Central Luzon, Philippines", type: "city", class: "place" },
                { lat: "14.7306", lng: "120.9472", display_name: "San Jose del Monte, Bulacan, Central Luzon, Philippines", type: "city", class: "place" },
                { lat: "15.0794", lng: "120.6200", display_name: "Angeles City, Pampanga, Central Luzon, Philippines", type: "city", class: "place" },
                { lat: "15.4817", lng: "120.5979", display_name: "Arayat, Pampanga, Central Luzon, Philippines", type: "municipality", class: "place" },
                { lat: "15.0499", lng: "120.6947", display_name: "San Fernando, Pampanga, Central Luzon, Philippines", type: "city", class: "place" },
                { lat: "15.1394", lng: "120.5883", display_name: "Clark, Pampanga, Central Luzon, Philippines", type: "district", class: "place" },
                { lat: "15.6617", lng: "120.9739", display_name: "Cabanatuan, Nueva Ecija, Central Luzon, Philippines", type: "city", class: "place" },
                { lat: "15.4855", lng: "120.8647", display_name: "Gapan, Nueva Ecija, Central Luzon, Philippines", type: "city", class: "place" },
                { lat: "14.9709", lng: "120.5155", display_name: "Olongapo, Zambales, Central Luzon, Philippines", type: "city", class: "place" },
                { lat: "15.3367", lng: "120.1739", display_name: "Subic, Zambales, Central Luzon, Philippines", type: "municipality", class: "place" },
                { lat: "15.7731", lng: "121.1533", display_name: "Baler, Aurora, Central Luzon, Philippines", type: "municipality", class: "place" },
                
                // Other Luzon Areas
                { lat: "16.4023", lng: "120.5960", display_name: "Baguio City, Benguet, Philippines", type: "city", class: "place" },
                { lat: "14.0860", lng: "121.1570", display_name: "Batangas City, Batangas, Philippines", type: "city", class: "place" },
                { lat: "13.7565", lng: "121.0583", display_name: "Lipa City, Batangas, Philippines", type: "city", class: "place" },
                { lat: "14.2456", lng: "121.1619", display_name: "Lipa, Batangas, CALABARZON, Philippines", type: "city", class: "place" },
                { lat: "14.1753", lng: "121.1589", display_name: "Tanauan, Batangas, CALABARZON, Philippines", type: "city", class: "place" },
                { lat: "14.2691", lng: "121.0054", display_name: "Tagaytay, Cavite, CALABARZON, Philippines", type: "city", class: "place" },
                { lat: "14.4791", lng: "120.9647", display_name: "Bacoor, Cavite, CALABARZON, Philippines", type: "city", class: "place" },
                { lat: "14.1014", lng: "121.0569", display_name: "Calamba, Laguna, CALABARZON, Philippines", type: "city", class: "place" },
                { lat: "14.2928", lng: "121.1599", display_name: "Santa Rosa, Laguna, CALABARZON, Philippines", type: "city", class: "place" },
                
                // Visayas
                { lat: "10.3157", lng: "123.8854", display_name: "Cebu City, Cebu, Philippines", type: "city", class: "place" },
                { lat: "10.7202", lng: "122.5621", display_name: "Iloilo City, Iloilo, Philippines", type: "city", class: "place" },
                { lat: "11.2442", lng: "125.0048", display_name: "Tacloban City, Leyte, Philippines", type: "city", class: "place" },
                
                // Mindanao
                { lat: "7.0731", lng: "125.6128", display_name: "Davao City, Davao del Sur, Philippines", type: "city", class: "place" },
                { lat: "8.4542", lng: "124.6319", display_name: "Cagayan de Oro City, Misamis Oriental, Philippines", type: "city", class: "place" }
            ];
            
            const searchTerm = query.toLowerCase();
            const filteredResults = mockLocations.filter(location => 
                location.display_name.toLowerCase().includes(searchTerm)
            );
            
            return filteredResults.slice(0, 10);
        }
        
        function testSearch() {
            const query = document.getElementById('searchInput').value.trim();
            if (!query) {
                log('Please enter a search query', 'error');
                return;
            }
            
            log(`=== TESTING SEARCH FOR: "${query}" ===`);
            
            const results = mockAddressSearch(query);
            
            if (results.length > 0) {
                log(`‚úÖ Found ${results.length} results for "${query}"`, 'success');
                displayResults(results);
            } else {
                log(`‚ùå No results found for "${query}"`, 'error');
                searchResults.innerHTML = '<div class="error">No results found</div>';
            }
        }
        
        function displayResults(results) {
            searchResults.innerHTML = '';
            
            results.forEach((result, index) => {
                const resultDiv = document.createElement('div');
                resultDiv.className = 'result';
                resultDiv.innerHTML = `
                    <strong>${index + 1}. ${result.display_name}</strong><br>
                    <small>Coordinates: ${result.lat}, ${result.lng}</small><br>
                    <small>Type: ${result.type} | Class: ${result.class}</small>
                `;
                searchResults.appendChild(resultDiv);
                
                log(`  ${index + 1}. ${result.display_name} (${result.lat}, ${result.lng})`);
            });
        }
        
        function testMultipleSearches() {
            log('=== TESTING MULTIPLE BULACAN SEARCHES ===');
            
            const testQueries = [
                'Bulacan',
                'Bulacan, Central Luzon',
                'Malolos',
                'Meycauayan',
                'San Jose del Monte',
                'Central Luzon',
                'Pampanga',
                'Angeles City'
            ];
            
            let totalResults = 0;
            
            testQueries.forEach((query, index) => {
                setTimeout(() => {
                    log(`Testing ${index + 1}/${testQueries.length}: "${query}"`);
                    const results = mockAddressSearch(query);
                    
                    if (results.length > 0) {
                        log(`  ‚úÖ "${query}": ${results.length} results`);
                        totalResults += results.length;
                        
                        if (index === 0) { // Display first search results
                            displayResults(results);
                        }
                    } else {
                        log(`  ‚ùå "${query}": No results`);
                    }
                    
                    if (index === testQueries.length - 1) {
                        log(`=== TESTING COMPLETED ===`);
                        log(`Total results across all searches: ${totalResults}`, 'success');
                    }
                }, index * 500);
            });
        }
        
        // Initialize on page load
        window.addEventListener('load', function() {
            log('üó∫Ô∏è Bulacan Search Fix Test Loaded');
            log('Enhanced location database now includes:');
            log('  - Bulacan Province');
            log('  - Malolos City');
            log('  - Meycauayan City');
            log('  - San Jose del Monte City');
            log('  - Other Central Luzon locations');
            log('');
            log('Ready to test Bulacan search functionality!');
        });
    </script>
</body>
</html>"